{"mappings":"AAEAA,QAAU,qCAMV,IAAIC,EAAO,ECLX,IAAIC,EAAOC,SAASC,cAAc,gBAC9BC,EAAUF,SAASC,cAAc,YACjCE,EAAUH,SAASC,cAAc,aACjCG,EAAO,EA0DX,SAASC,EAASC,GAChB,MAAMC,aAAEA,EAAYC,KAAEA,EAAIC,MAAEA,EAAKC,MAAEA,EAAKC,SAAEA,EAAQC,UAAEA,GAAcN,EAClE,MAAO,2CACOC,WAAsBC,0IAGfE,oEAGAD,uEAGGE,wEAGCC,qC,CAtE3Bb,EAAKc,iBAAiB,UAAUC,IAUhC,IDT0BC,ECAxBD,EAAIE,iBDAoBD,ECCJD,EAAIG,OAAOC,YAAYC,MDApCC,MACL,gCAAmBvB,8BAAsCkB,+DAExDM,MAAKC,GAAYA,EAASC,SAC1BC,OAAMC,IACL,MAAMA,CAAK,ICKZJ,MAAKK,IACoB,GAApBA,EAAOC,WAIPD,EAAOC,WAAa,GAAKvB,IAC3BwB,MAAM,8DACNzB,EAAQ0B,UAAUC,IAAI,cAExB5B,EAAQ6B,UAAYL,EAAOM,KACxBC,KAAI3B,GACID,EAASC,KAEjB4B,KAAK,KAXNN,MAAM,eAWG,IAEZJ,OAAMC,IACL,MAAMA,CAAK,GA1BmC,IAGpDtB,EAAQU,iBAAiB,SAAS,KA2BlC,IDtB8BE,ICJAf,SAASC,cAAc,iBAAiBkB,MDKpErB,GAAQ,EACDsB,MACL,gCAAmBvB,8BAAsCkB,6DAAsFjB,KAE9IuB,MAAKC,GAAYA,EAASC,SAC1BC,OAAMC,IACL,MAAMA,CAAK,ICiBZJ,MAAKK,IACoB,GAApBA,EAAOC,WAIXvB,GAAQ,EACJsB,EAAOC,WAAa,GAAKvB,IAC3BwB,MAAM,8DACNzB,EAAQ0B,UAAUC,IAAI,cAExB5B,EAAQ6B,WAAaL,EAAOM,KACzBC,KAAI3B,GACID,EAASC,KAEjB4B,KAAK,KAZNC,QAAQC,IAAI,eAYH,IAEZZ,OAAMC,IACL,MAAMA,CAAK,GA7C4D","sources":["src/fetch-images.js","src/index.js"],"sourcesContent":["// ## Initializing ##\nconst BASE_URL = 'https://pixabay.com/api/';\nAPI_KEY = '38966446-c32fc19d0a971996be7b08c24';\n\nconst image_type = 'photo';\nconst orientation = 'horizontal';\nconst safesearch = true;\nconst per_page = 40;\nlet page = 1;\n\nexport function getImages(text) {\n  return fetch(\n    `${BASE_URL}?key=${API_KEY}&image_type=${image_type}&q=${text}&orientation=${orientation}&safesearch=${safesearch}&per_page=${per_page}&page=1`\n  )\n    .then(response => response.json())\n    .catch(error => {\n      throw error;\n    });\n}\nexport function getImagesNext(text) {\n  page += 1;\n  return fetch(\n    `${BASE_URL}?key=${API_KEY}&image_type=${image_type}&q=${text}&orientation=${orientation}&safesearch=${safesearch}&per_page=${per_page}&page=${page}`\n  )\n    .then(response => response.json())\n    .catch(error => {\n      throw error;\n    });\n}\n","// Import\nimport { getImages, getImagesNext } from './fetch-images';\n// ## Initialization ##\nlet form = document.querySelector('.search-form');\nlet gallery = document.querySelector('.gallery');\nlet btnLoad = document.querySelector('[js-load]');\nlet page = 1;\n\n// Function on search\nform.addEventListener('submit', evt => {\n  evt.preventDefault();\n  setMarkup(getImages(evt.target.searchQuery.value));\n});\n\nbtnLoad.addEventListener('click', () => {\n  setMarkupNext(getImagesNext(document.querySelector(\"[type='text']\").value));\n});\n\n// Setting markup for gallery\nfunction setMarkup(response) {\n  response\n    .then(images => {\n      if (images.totalHits == 0) {\n        alert('Not found!!!');\n        return;\n      }\n      if (images.totalHits <= 40 * page) {\n        alert(\"We're sorry, but you've reached the end of search results.\");\n        btnLoad.classList.add('invisible');\n      }\n      gallery.innerHTML = images.hits\n        .map(image => {\n          return setImage(image);\n        })\n        .join('');\n    })\n    .catch(error => {\n      throw error;\n    });\n}\n\nfunction setMarkupNext(response) {\n  response\n    .then(images => {\n      if (images.totalHits == 0) {\n        console.log('Not found!!!');\n        return;\n      }\n      page += 1;\n      if (images.totalHits <= 40 * page) {\n        alert(\"We're sorry, but you've reached the end of search results.\");\n        btnLoad.classList.add('invisible');\n      }\n      gallery.innerHTML += images.hits\n        .map(image => {\n          return setImage(image);\n        })\n        .join('');\n    })\n    .catch(error => {\n      throw error;\n    });\n}\n\nfunction setImage(image) {\n  const { webformatURL, tags, views, likes, comments, downloads } = image;\n  return `<div class=\"photo-card\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"335\" height=\"200\" class=\"image\" loading=\"lazy\" />\n    <div class=\"info\">\n      <p class=\"info-item\">\n        <b>Likes</b> ${likes}\n      </p>\n      <p class=\"info-item\">\n        <b>Views</b> ${views}\n      </p>\n      <p class=\"info-item\">\n        <b>Comments</b> ${comments}\n      </p>\n      <p class=\"info-item\">\n        <b>Downloads</b> ${downloads}\n      </p>\n    </div>\n  </div>`;\n}\n"],"names":["API_KEY","$b099245160fbbd55$var$page","$1f0dc3b9307be026$var$form","document","querySelector","$1f0dc3b9307be026$var$gallery","$1f0dc3b9307be026$var$btnLoad","$1f0dc3b9307be026$var$page","$1f0dc3b9307be026$var$setImage","image","webformatURL","tags","views","likes","comments","downloads","addEventListener","evt","text","preventDefault","target","searchQuery","value","fetch","then","response","json","catch","error","images","totalHits","alert","classList","add","innerHTML","hits","map","join","console","log"],"version":3,"file":"index.d1e2413d.js.map"}