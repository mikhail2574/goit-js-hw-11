{"mappings":"YACA,IAAMA,EAAW,2BACjBC,QAAU,qCAEV,IAAMC,EAAa,QACbC,EAAc,aAGhBC,EAAO,ECLX,IAAIC,EAAOC,SAASC,cAAc,gBAC9BC,EAAUF,SAASC,cAAc,YACjCE,EAAUH,SAASC,cAAc,aACjCG,EAAO,EA0DX,SAASC,EAASC,GAChB,IAAQC,EAA0DD,EAA1DC,aAAcC,EAA4CF,EAA5CE,KAAMC,EAAsCH,EAAtCG,MAAOC,EAA+BJ,EAA/BI,MAAOC,EAAwBL,EAAxBK,SAAUC,EAAcN,EAAdM,UACpD,MAAO,2CAC6BC,OAAtBN,EAAa,WAGNM,OAHeL,EAAK,0IAMpBK,OAHAH,EAAM,oEAMHG,OAHHJ,EAAM,uEAMFI,OAHDF,EAAS,wEAGEE,OAAVD,EAAU,qC,CAtErCb,EAAKe,iBAAiB,UAAU,SAAAC,GAUhC,IDT0BC,ECAxBD,EAAIE,iBDAoBD,ECCJD,EAAIG,OAAOC,YAAYC,MDApCC,MACL,GAAmBR,OAAhBnB,EAAS,SAA6BmB,OAAtBlB,QAAQ,gBAA8BkB,OAAhBjB,EAAW,OAAyBiB,OAApBG,EAAK,iBAAyCH,OAA1BhB,EAAY,gBAAqCgB,QAN/G,EAMmG,cAAqBA,OAL1H,GAK0H,YAEtIS,MAAK,SAAAC,G,OAAYA,EAASC,M,IAC1BC,OAAM,SAAAC,GACL,MAAMA,C,ICKPJ,MAAK,SAAAK,GACoB,GAApBA,EAAOC,WAIPD,EAAOC,WAAa,GAAKxB,IAC3ByB,MAAM,8DACN1B,EAAQ2B,UAAUC,IAAI,cAExB7B,EAAQ8B,UAAYL,EAAOM,KACxBC,KAAI,SAAA5B,GACH,OAAOD,EAASC,E,IAEjB6B,KAAK,KAXNN,MAAM,e,IAaTJ,OAAM,SAAAC,GACL,MAAMA,C,OAvBZvB,EAAQW,iBAAiB,SAAS,WA2BlC,IDtB8BE,ICJAhB,SAASC,cAAc,iBAAiBmB,MDKpEtB,GAAQ,EACDuB,MACL,GAAmBR,OAAhBnB,EAAS,SAA6BmB,OAAtBlB,QAAQ,gBAA8BkB,OAAhBjB,EAAW,OAAyBiB,OAApBG,EAAK,iBAAyCH,OAA1BhB,EAAY,gBAAqCgB,QAhB/G,EAgBmG,cAA6BA,OAflI,GAe0H,UAAaA,OAALf,IAE9IwB,MAAK,SAAAC,G,OAAYA,EAASC,M,IAC1BC,OAAM,SAAAC,GACL,MAAMA,C,ICiBPJ,MAAK,SAAAK,GACoB,GAApBA,EAAOC,WAIXxB,GAAQ,EACJuB,EAAOC,WAAa,GAAKxB,IAC3ByB,MAAM,8DACN1B,EAAQ2B,UAAUC,IAAI,cAExB7B,EAAQ8B,WAAaL,EAAOM,KACzBC,KAAI,SAAA5B,GACH,OAAOD,EAASC,E,IAEjB6B,KAAK,KAZNC,QAAQC,IAAI,e,IAcfZ,OAAM,SAAAC,GACL,MAAMA,C","sources":["src/fetch-images.js","src/index.js"],"sourcesContent":["// ## Initializing ##\nconst BASE_URL = 'https://pixabay.com/api/';\nAPI_KEY = '38966446-c32fc19d0a971996be7b08c24';\n\nconst image_type = 'photo';\nconst orientation = 'horizontal';\nconst safesearch = true;\nconst per_page = 40;\nlet page = 1;\n\nexport function getImages(text) {\n  return fetch(\n    `${BASE_URL}?key=${API_KEY}&image_type=${image_type}&q=${text}&orientation=${orientation}&safesearch=${safesearch}&per_page=${per_page}&page=1`\n  )\n    .then(response => response.json())\n    .catch(error => {\n      throw error;\n    });\n}\nexport function getImagesNext(text) {\n  page += 1;\n  return fetch(\n    `${BASE_URL}?key=${API_KEY}&image_type=${image_type}&q=${text}&orientation=${orientation}&safesearch=${safesearch}&per_page=${per_page}&page=${page}`\n  )\n    .then(response => response.json())\n    .catch(error => {\n      throw error;\n    });\n}\n","// Import\nimport { getImages, getImagesNext } from './fetch-images';\n// ## Initialization ##\nlet form = document.querySelector('.search-form');\nlet gallery = document.querySelector('.gallery');\nlet btnLoad = document.querySelector('[js-load]');\nlet page = 1;\n\n// Function on search\nform.addEventListener('submit', evt => {\n  evt.preventDefault();\n  setMarkup(getImages(evt.target.searchQuery.value));\n});\n\nbtnLoad.addEventListener('click', () => {\n  setMarkupNext(getImagesNext(document.querySelector(\"[type='text']\").value));\n});\n\n// Setting markup for gallery\nfunction setMarkup(response) {\n  response\n    .then(images => {\n      if (images.totalHits == 0) {\n        alert('Not found!!!');\n        return;\n      }\n      if (images.totalHits <= 40 * page) {\n        alert(\"We're sorry, but you've reached the end of search results.\");\n        btnLoad.classList.add('invisible');\n      }\n      gallery.innerHTML = images.hits\n        .map(image => {\n          return setImage(image);\n        })\n        .join('');\n    })\n    .catch(error => {\n      throw error;\n    });\n}\n\nfunction setMarkupNext(response) {\n  response\n    .then(images => {\n      if (images.totalHits == 0) {\n        console.log('Not found!!!');\n        return;\n      }\n      page += 1;\n      if (images.totalHits <= 40 * page) {\n        alert(\"We're sorry, but you've reached the end of search results.\");\n        btnLoad.classList.add('invisible');\n      }\n      gallery.innerHTML += images.hits\n        .map(image => {\n          return setImage(image);\n        })\n        .join('');\n    })\n    .catch(error => {\n      throw error;\n    });\n}\n\nfunction setImage(image) {\n  const { webformatURL, tags, views, likes, comments, downloads } = image;\n  return `<div class=\"photo-card\">\n    <img src=\"${webformatURL}\" alt=\"${tags}\" width=\"335\" height=\"200\" class=\"image\" loading=\"lazy\" />\n    <div class=\"info\">\n      <p class=\"info-item\">\n        <b>Likes</b> ${likes}\n      </p>\n      <p class=\"info-item\">\n        <b>Views</b> ${views}\n      </p>\n      <p class=\"info-item\">\n        <b>Comments</b> ${comments}\n      </p>\n      <p class=\"info-item\">\n        <b>Downloads</b> ${downloads}\n      </p>\n    </div>\n  </div>`;\n}\n"],"names":["$b6fe3361e5e63a7b$var$BASE_URL","API_KEY","$b6fe3361e5e63a7b$var$image_type","$b6fe3361e5e63a7b$var$orientation","$b6fe3361e5e63a7b$var$page","$b8f9b7833fa37166$var$form","document","querySelector","$b8f9b7833fa37166$var$gallery","$b8f9b7833fa37166$var$btnLoad","$b8f9b7833fa37166$var$page","$b8f9b7833fa37166$var$setImage","image","webformatURL","tags","views","likes","comments","downloads","concat","addEventListener","evt","text","preventDefault","target","searchQuery","value","fetch","then","response","json","catch","error","images","totalHits","alert","classList","add","innerHTML","hits","map","join","console","log"],"version":3,"file":"index.ed3a8e9e.js.map"}